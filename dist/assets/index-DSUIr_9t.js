var A=Object.defineProperty;var $=(a,e,t)=>e in a?A(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var n=(a,e,t)=>$(a,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function M(a,e){return{x:a.x-e.x,y:a.y-e.y}}function S(a){return Math.sqrt(a.x*a.x+a.y*a.y)}function O(a){const e=S(a);return e===0?{x:0,y:0}:{x:a.x/e,y:a.y/e}}function B(a,e){return S(M(a,e))}function l(a,e){return a+Math.random()*(e-a)}function T(a,e){return Math.floor(l(a,e+1))}var w=(a=>(a.PIZZA="pizza",a.BURGER="burger",a.SUSHI="sushi",a.DONUT="donut",a.TACO="taco",a.HOTDOG="hotdog",a))(w||{});const G={pizza:{emoji:"üçï",color:"#ff6b35",points:10},burger:{emoji:"üçî",color:"#8b4513",points:15},sushi:{emoji:"üç£",color:"#ff69b4",points:20},donut:{emoji:"üç©",color:"#ff85a2",points:12},taco:{emoji:"üåÆ",color:"#f4a460",points:18},hotdog:{emoji:"üå≠",color:"#daa520",points:8}};class V{constructor(e,t,s,i,o){n(this,"position");n(this,"velocity");n(this,"rotation",0);n(this,"rotationSpeed");n(this,"size");n(this,"type");n(this,"isSliced",!1);n(this,"sliceAngle",0);n(this,"halfVelocity1",{x:0,y:0});n(this,"halfVelocity2",{x:0,y:0});n(this,"sliceOffset",0);n(this,"alpha",1);n(this,"config");this.position={x:e,y:t},this.velocity={x:s,y:i},this.rotationSpeed=l(-5,5),this.size=l(60,90),this.type=o||this.getRandomType(),this.config=G[this.type]}getRandomType(){const e=Object.values(w);return e[T(0,e.length-1)]}get emoji(){return this.config.emoji}get color(){return this.config.color}get points(){return this.config.points}slice(e){if(this.isSliced)return;this.isSliced=!0,this.sliceAngle=e;const t=Math.cos(e+Math.PI/2),s=Math.sin(e+Math.PI/2),i=150;this.halfVelocity1={x:this.velocity.x+t*i,y:this.velocity.y+s*i-100},this.halfVelocity2={x:this.velocity.x-t*i,y:this.velocity.y-s*i-100}}update(e,t){this.isSliced?(this.halfVelocity1.y+=t*e,this.halfVelocity2.y+=t*e,this.sliceOffset+=200*e,this.alpha-=e*.5,this.position.x+=(this.halfVelocity1.x+this.halfVelocity2.x)/2*e,this.position.y+=(this.halfVelocity1.y+this.halfVelocity2.y)/2*e):(this.velocity.y+=t*e,this.position.x+=this.velocity.x*e,this.position.y+=this.velocity.y*e),this.rotation+=this.rotationSpeed*e}render(e){e.save(),e.globalAlpha=Math.max(0,this.alpha),this.isSliced?(this.renderHalf(e,-this.sliceOffset,!0),this.renderHalf(e,this.sliceOffset,!1)):(e.translate(this.position.x,this.position.y),e.rotate(this.rotation),e.font=`${this.size}px serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(this.emoji,0,0)),e.restore()}renderHalf(e,t,s){e.save(),e.translate(this.position.x,this.position.y),e.rotate(this.sliceAngle),e.translate(t,0),e.rotate(this.rotation-this.sliceAngle),e.beginPath(),s?e.rect(-this.size,-this.size,this.size,this.size*2):e.rect(0,-this.size,this.size,this.size*2),e.clip(),e.font=`${this.size}px serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(this.emoji,0,0),e.restore()}isOffScreen(e){return this.position.y>e+this.size}containsPoint(e,t){if(this.isSliced)return!1;const s=e-this.position.x,i=t-this.position.y,o=this.size/2;return s*s+i*i<o*o}}function R(a,e){const t=l(a*.15,a*.85),s=e+50,i=a/2+l(-100,100),o=Math.atan2(-e*.7,i-t),r=l(700,1e3),c=Math.cos(o)*r+l(-100,100),d=Math.sin(o)*r;return new V(t,s,c,d)}class D{constructor(){n(this,"trail",[]);n(this,"trailMaxAge",.15);n(this,"minSliceSpeed",300);n(this,"isActive",!1)}get currentSpeed(){if(this.trail.length<2)return 0;const e=performance.now()/1e3,t=this.trail.filter(o=>e-o.time<.05);if(t.length<2)return 0;const s=t[t.length-1].time-t[0].time;return s<=0?0:B({x:t[0].x,y:t[0].y},{x:t[t.length-1].x,y:t[t.length-1].y})/s}get canSlice(){return this.isActive&&this.currentSpeed>=this.minSliceSpeed}get sliceDirection(){if(this.trail.length<2)return{x:0,y:1};const e=this.trail.slice(-5);if(e.length<2)return{x:0,y:1};const t=M({x:e[e.length-1].x,y:e[e.length-1].y},{x:e[0].x,y:e[0].y});return S(t)===0?{x:0,y:1}:O(t)}get sliceAngle(){const e=this.sliceDirection;return Math.atan2(e.y,e.x)}startSlice(e,t){this.isActive=!0,this.trail=[],this.addPoint(e,t)}moveSlice(e,t){this.isActive&&this.addPoint(e,t)}endSlice(){this.isActive=!1}addPoint(e,t){const s=performance.now()/1e3;this.trail.push({x:e,y:t,time:s})}update(){const e=performance.now()/1e3;this.trail=this.trail.filter(t=>e-t.time<this.trailMaxAge)}render(e){if(this.trail.length<2)return;const t=performance.now()/1e3;e.save(),e.lineCap="round",e.lineJoin="round";for(let s=1;s<this.trail.length;s++){const i=this.trail[s-1],o=this.trail[s],r=t-i.time,c=t-o.time,d=Math.max(0,1-r/this.trailMaxAge),u=Math.max(0,1-c/this.trailMaxAge),g=2+d*20,p=2+u*20,f=e.createLinearGradient(i.x,i.y,o.x,o.y);f.addColorStop(0,`rgba(255, 107, 53, ${d})`),f.addColorStop(1,`rgba(247, 147, 30, ${u})`),e.strokeStyle=f,e.lineWidth=(g+p)/2,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(o.x,o.y),e.stroke()}if(this.isActive&&this.trail.length>0){const s=this.trail[this.trail.length-1],i=.5;e.shadowColor="rgba(255, 107, 53, 0.8)",e.shadowBlur=20,e.fillStyle=`rgba(255, 255, 255, ${i})`,e.beginPath(),e.arc(s.x,s.y,8,0,Math.PI*2),e.fill()}e.restore()}getRecentPoints(){const e=performance.now()/1e3;return this.trail.filter(t=>e-t.time<.03).map(t=>({x:t.x,y:t.y}))}}class k{constructor(){n(this,"particles",[]);n(this,"gravity",800)}emit(e,t,s=10){for(let i=0;i<s;i++){const o=l(0,Math.PI*2),r=l(100,400);this.particles.push({x:e.x,y:e.y,vx:Math.cos(o)*r,vy:Math.sin(o)*r-100,size:l(4,12),color:t,life:1,maxLife:l(.5,1),rotation:l(0,Math.PI*2),rotationSpeed:l(-10,10)})}}emitTrail(e,t){this.particles.push({x:e.x+l(-5,5),y:e.y+l(-5,5),vx:l(-20,20),vy:l(-20,20),size:l(2,6),color:t,life:1,maxLife:.3,rotation:0,rotationSpeed:0})}update(e){for(let t=this.particles.length-1;t>=0;t--){const s=this.particles[t];s.vy+=this.gravity*e,s.x+=s.vx*e,s.y+=s.vy*e,s.rotation+=s.rotationSpeed*e,s.life-=e/s.maxLife,s.life<=0&&this.particles.splice(t,1)}}render(e){e.save();for(const t of this.particles){const s=Math.max(0,t.life);e.globalAlpha=s,e.fillStyle=t.color,e.save(),e.translate(t.x,t.y),e.rotate(t.rotation);const i=t.size/2;e.beginPath(),e.roundRect(-i,-i,t.size,t.size,2),e.fill(),e.restore()}e.restore()}clear(){this.particles=[]}}const b="ninja-slicer-data",x={highScore:0,gamesPlayed:0,totalSlices:0,musicVolume:.5,sfxVolume:.7};class z{constructor(){n(this,"data");this.data=this.load()}load(){try{const e=localStorage.getItem(b);if(e)return{...x,...JSON.parse(e)}}catch(e){console.warn("Failed to load storage:",e)}return{...x}}save(){try{localStorage.setItem(b,JSON.stringify(this.data))}catch(e){console.warn("Failed to save storage:",e)}}get highScore(){return this.data.highScore}setHighScore(e){return e>this.data.highScore?(this.data.highScore=e,this.save(),!0):!1}get gamesPlayed(){return this.data.gamesPlayed}incrementGamesPlayed(){this.data.gamesPlayed++,this.save()}get totalSlices(){return this.data.totalSlices}addSlices(e){this.data.totalSlices+=e,this.save()}get musicVolume(){return this.data.musicVolume}setMusicVolume(e){this.data.musicVolume=Math.max(0,Math.min(1,e)),this.save()}get sfxVolume(){return this.data.sfxVolume}setSfxVolume(e){this.data.sfxVolume=Math.max(0,Math.min(1,e)),this.save()}}const m=new z;class N{constructor(){n(this,"audioContext",null);n(this,"sounds",new Map);n(this,"musicGainNode",null);n(this,"sfxGainNode",null);n(this,"musicSource",null);n(this,"musicBuffer",null);n(this,"isInitialized",!1);n(this,"isMusicPlaying",!1)}async init(){if(!this.isInitialized)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.musicGainNode=this.audioContext.createGain(),this.sfxGainNode=this.audioContext.createGain(),this.musicGainNode.connect(this.audioContext.destination),this.sfxGainNode.connect(this.audioContext.destination),this.setMusicVolume(m.musicVolume),this.setSfxVolume(m.sfxVolume),await this.generateSounds(),this.isInitialized=!0}catch(e){console.warn("Audio initialization failed:",e)}}async generateSounds(){if(!this.audioContext)return;const e=[];for(let t=0;t<3;t++)e.push(this.createSliceSound(.8+t*.1));this.sounds.set("slice",e),this.sounds.set("combo",[this.createComboSound()]),this.sounds.set("miss",[this.createMissSound()]),this.sounds.set("gameOver",[this.createGameOverSound()]),this.sounds.set("button",[this.createButtonSound()]),this.musicBuffer=this.createBackgroundMusic()}createSliceSound(e=1){const t=this.audioContext,s=.15,i=t.sampleRate,o=t.createBuffer(1,s*i,i),r=o.getChannelData(0);for(let c=0;c<o.length;c++){const d=c/i,u=Math.exp(-d*30),g=800*e+Math.random()*200;r[c]=u*(Math.sin(2*Math.PI*g*d)*.3+(Math.random()*2-1)*.2)}return o}createComboSound(){const e=this.audioContext,t=.3,s=e.sampleRate,i=e.createBuffer(1,t*s,s),o=i.getChannelData(0);for(let r=0;r<i.length;r++){const c=r/s,d=Math.exp(-c*10),u=523.25,g=659.25,p=783.99;let f=u;c>.1&&(f=g),c>.2&&(f=p),o[r]=d*Math.sin(2*Math.PI*f*c)*.4}return i}createMissSound(){const e=this.audioContext,t=.4,s=e.sampleRate,i=e.createBuffer(1,t*s,s),o=i.getChannelData(0);for(let r=0;r<i.length;r++){const c=r/s,d=Math.exp(-c*8),u=300-c*200;o[r]=d*Math.sin(2*Math.PI*u*c)*.3}return i}createGameOverSound(){const e=this.audioContext,t=.8,s=e.sampleRate,i=e.createBuffer(1,t*s,s),o=i.getChannelData(0);for(let r=0;r<i.length;r++){const c=r/s,d=Math.exp(-c*3),u=400-c*150;o[r]=d*(Math.sin(2*Math.PI*u*c)*.3+Math.sin(2*Math.PI*u*.5*c)*.2)}return i}createButtonSound(){const e=this.audioContext,t=.08,s=e.sampleRate,i=e.createBuffer(1,t*s,s),o=i.getChannelData(0);for(let r=0;r<i.length;r++){const c=r/s,d=Math.exp(-c*50);o[r]=d*Math.sin(2*Math.PI*600*c)*.2}return i}createBackgroundMusic(){const e=this.audioContext,t=8,s=e.sampleRate,i=e.createBuffer(2,t*s,s),o=i.getChannelData(0),r=i.getChannelData(1),c=110,d=[1,1.25,1.5,2];for(let u=0;u<i.length;u++){const g=u/s;let p=0;p+=Math.sin(2*Math.PI*c*g)*.1,d.forEach((C,I)=>{const P=c*2*C,E=Math.sin(2*Math.PI*.1*g+I)*.3+.7;p+=Math.sin(2*Math.PI*P*g)*.05*E});const f=Math.sin(2*Math.PI*2*g)>.7?.02:0;p+=Math.sin(2*Math.PI*c*4*g)*f,o[u]=p*(1+Math.sin(2*Math.PI*.05*g)*.1),r[u]=p*(1-Math.sin(2*Math.PI*.05*g)*.1)}return i}play(e){if(!this.audioContext||!this.sfxGainNode)return;const t=this.sounds.get(e);if(!t||t.length===0)return;this.audioContext.state==="suspended"&&this.audioContext.resume();const s=t[Math.floor(Math.random()*t.length)],i=this.audioContext.createBufferSource();i.buffer=s,i.connect(this.sfxGainNode),i.start()}startMusic(){!this.audioContext||!this.musicGainNode||!this.musicBuffer||this.isMusicPlaying||(this.audioContext.state==="suspended"&&this.audioContext.resume(),this.musicSource=this.audioContext.createBufferSource(),this.musicSource.buffer=this.musicBuffer,this.musicSource.loop=!0,this.musicSource.connect(this.musicGainNode),this.musicSource.start(),this.isMusicPlaying=!0)}stopMusic(){this.musicSource&&(this.musicSource.stop(),this.musicSource=null),this.isMusicPlaying=!1}setMusicVolume(e){this.musicGainNode&&(this.musicGainNode.gain.value=e*.5),m.setMusicVolume(e)}setSfxVolume(e){this.sfxGainNode&&(this.sfxGainNode.gain.value=e),m.setSfxVolume(e)}get musicVolume(){return m.musicVolume}get sfxVolume(){return m.sfxVolume}resume(){var e;((e=this.audioContext)==null?void 0:e.state)==="suspended"&&this.audioContext.resume()}}const h=new N;var L=(a=>(a.MENU="menu",a.PLAYING="playing",a.PAUSED="paused",a.GAME_OVER="gameOver",a))(L||{});class F{constructor(e){n(this,"canvas");n(this,"ctx");n(this,"width",0);n(this,"height",0);n(this,"dishes",[]);n(this,"slicer");n(this,"particles");n(this,"state","menu");n(this,"score",0);n(this,"combo",0);n(this,"comboTimer",0);n(this,"lives",3);n(this,"maxLives",3);n(this,"spawnTimer",0);n(this,"spawnInterval",1.5);n(this,"minSpawnInterval",.4);n(this,"difficulty",1);n(this,"lastTime",0);n(this,"animationFrameId",0);n(this,"gravity",600);n(this,"comboTimeout",.8);n(this,"callbacks",null);n(this,"gameLoop",()=>{const e=performance.now(),t=Math.min((e-this.lastTime)/1e3,.1);this.lastTime=e,this.state==="playing"&&this.update(t),this.render(),this.animationFrameId=requestAnimationFrame(this.gameLoop)});this.canvas=e,this.ctx=e.getContext("2d"),this.slicer=new D,this.particles=new k,this.resize(),this.setupEventListeners()}resize(){const e=window.devicePixelRatio||1;this.width=window.innerWidth,this.height=window.innerHeight,this.canvas.width=this.width*e,this.canvas.height=this.height*e,this.canvas.style.width=`${this.width}px`,this.canvas.style.height=`${this.height}px`,this.ctx.scale(e,e)}setupEventListeners(){window.addEventListener("resize",()=>this.resize()),this.canvas.addEventListener("mousedown",e=>this.handlePointerDown(e.clientX,e.clientY)),this.canvas.addEventListener("mousemove",e=>this.handlePointerMove(e.clientX,e.clientY)),this.canvas.addEventListener("mouseup",()=>this.handlePointerUp()),this.canvas.addEventListener("mouseleave",()=>this.handlePointerUp()),this.canvas.addEventListener("touchstart",e=>{e.preventDefault();const t=e.touches[0];this.handlePointerDown(t.clientX,t.clientY)},{passive:!1}),this.canvas.addEventListener("touchmove",e=>{e.preventDefault();const t=e.touches[0];this.handlePointerMove(t.clientX,t.clientY)},{passive:!1}),this.canvas.addEventListener("touchend",()=>this.handlePointerUp()),this.canvas.addEventListener("touchcancel",()=>this.handlePointerUp())}handlePointerDown(e,t){this.state==="playing"&&(this.slicer.startSlice(e,t),h.resume())}handlePointerMove(e,t){this.state==="playing"&&(this.slicer.moveSlice(e,t),this.checkSliceCollisions())}handlePointerUp(){this.slicer.endSlice()}checkSliceCollisions(){if(!this.slicer.canSlice)return;const e=this.slicer.getRecentPoints();if(e.length===0)return;let t=0;for(const s of this.dishes)if(!s.isSliced){for(const i of e)if(s.containsPoint(i.x,i.y)){this.sliceDish(s),t++;break}}t>0&&t>1&&(this.combo+=t,h.play("combo"))}sliceDish(e){var i,o;e.slice(this.slicer.sliceAngle);const t=Math.max(1,this.combo),s=e.points*t;this.score+=s,this.combo++,this.comboTimer=this.comboTimeout,h.play("slice"),this.particles.emit(e.position,e.color,15),m.addSlices(1),(i=this.callbacks)==null||i.onScoreChange(this.score),(o=this.callbacks)==null||o.onComboChange(this.combo)}setCallbacks(e){this.callbacks=e}start(){var e;this.reset(),this.state="playing",(e=this.callbacks)==null||e.onStateChange(this.state),h.startMusic(),m.incrementGamesPlayed(),this.animationFrameId===0&&(this.lastTime=performance.now(),this.gameLoop())}pause(){var e;this.state==="playing"&&(this.state="paused",(e=this.callbacks)==null||e.onStateChange(this.state))}resume(){var e;this.state==="paused"&&(this.state="playing",this.lastTime=performance.now(),(e=this.callbacks)==null||e.onStateChange(this.state))}reset(){var e,t,s;this.dishes=[],this.particles.clear(),this.score=0,this.combo=0,this.comboTimer=0,this.lives=this.maxLives,this.spawnTimer=0,this.spawnInterval=1.5,this.difficulty=1,(e=this.callbacks)==null||e.onScoreChange(0),(t=this.callbacks)==null||t.onComboChange(0),(s=this.callbacks)==null||s.onLivesChange(this.maxLives)}update(e){var t;this.difficulty=1+this.score/500,this.spawnInterval=Math.max(this.minSpawnInterval,1.5-this.difficulty*.1),this.spawnTimer-=e,this.spawnTimer<=0&&(this.spawnDish(),this.spawnTimer=this.spawnInterval+l(-.3,.3),this.difficulty>2&&Math.random()<.3&&setTimeout(()=>this.spawnDish(),200)),this.combo>0&&(this.comboTimer-=e,this.comboTimer<=0&&(this.combo=0,(t=this.callbacks)==null||t.onComboChange(0)));for(let s=this.dishes.length-1;s>=0;s--){const i=this.dishes[s];i.update(e,this.gravity),i.isOffScreen(this.height)?(i.isSliced||this.loseLife(),this.dishes.splice(s,1)):i.isSliced&&i.alpha<=0&&this.dishes.splice(s,1)}this.slicer.update(),this.particles.update(e)}spawnDish(){const e=R(this.width,this.height);this.dishes.push(e)}loseLife(){var e,t;this.lives--,(e=this.callbacks)==null||e.onLivesChange(this.lives),h.play("miss"),this.combo=0,(t=this.callbacks)==null||t.onComboChange(0),this.lives<=0&&this.gameOver()}gameOver(){var t,s;this.state="gameOver",(t=this.callbacks)==null||t.onStateChange(this.state),h.play("gameOver"),h.stopMusic();const e=m.setHighScore(this.score);(s=this.callbacks)==null||s.onGameOver(this.score,e)}render(){const e=this.ctx;e.clearRect(0,0,this.width,this.height);const t=e.createLinearGradient(0,0,0,this.height);t.addColorStop(0,"#16213e"),t.addColorStop(1,"#0f0f1a"),e.fillStyle=t,e.fillRect(0,0,this.width,this.height);for(const s of this.dishes)s.render(e);this.particles.render(e),this.slicer.render(e)}get currentState(){return this.state}get highScore(){return m.highScore}destroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),h.stopMusic()}}const H="Ninja Slicer",j="Slice the dishes!",q="Play",U="Best",Y="Settings",_="Game Over",X="Score",J="New Record!",K="Combo",Z="Try Again",W="Menu",Q="Music",ee="Sound Effects",te="Close",se="Swipe to slice the dishes!",ie="Paused",ne="Resume",ae={title:H,subtitle:j,play:q,highScore:U,settings:Y,gameOver:_,score:X,newRecord:J,combo:K,tryAgain:Z,menu:W,music:Q,sounds:ee,close:te,swipeToSlice:se,paused:ie,resume:ne},oe="·Éú·Éò·Éú·É´·Éê ·É°·Éö·Éê·Éò·É°·Éî·É†·Éò",re="·Éì·Éê·É≠·Éî·É†·Éò ·Éô·Éî·É†·É´·Éî·Éë·Éò!",ce="·Éó·Éê·Éõ·Éê·É®·Éò",le="·É†·Éî·Éô·Éù·É†·Éì·Éò",he="·Éû·Éê·É†·Éê·Éõ·Éî·É¢·É†·Éî·Éë·Éò",de="·Éó·Éê·Éõ·Éê·É®·Éò ·Éì·Éê·É°·É†·É£·Éö·Éì·Éê",ue="·É•·É£·Éö·Éê",me="·Éê·ÉÆ·Éê·Éö·Éò ·É†·Éî·Éô·Éù·É†·Éì·Éò!",ge="·Éô·Éù·Éõ·Éë·Éù",pe="·Éó·Éê·Éï·Éò·Éì·Éê·Éú",fe="·Éõ·Éî·Éú·Éò·É£",ve="·Éõ·É£·É°·Éò·Éô·Éê",ye="·ÉÆ·Éõ·Éù·Éï·Éê·Éú·Éò ·Éî·É§·Éî·É•·É¢·Éî·Éë·Éò",Se="·Éì·Éê·ÉÆ·É£·É†·Éï·Éê",be="·Éí·Éê·Éì·Éê·Éê·É°·É†·Éò·Éê·Éö·Éî ·Éô·Éî·É†·É´·Éî·Éë·Éò·É° ·Éì·Éê·É°·Éê·É≠·É†·Éî·Éö·Éê·Éì!",xe="·Éû·Éê·É£·Éñ·Éê",Me="·Éí·Éê·Éí·É†·É´·Éî·Éö·Éî·Éë·Éê",we={title:oe,subtitle:re,play:ce,highScore:le,settings:he,gameOver:de,score:ue,newRecord:me,combo:ge,tryAgain:pe,menu:fe,music:ve,sounds:ye,close:Se,swipeToSlice:be,paused:xe,resume:Me},Le="–ù–∏–Ω–¥–∑—è –°–ª–∞–π—Å–µ—Ä",Ce="–†–∞–∑—Ä–µ–∂—å –±–ª—é–¥–∞!",Ie="–ò–≥—Ä–∞—Ç—å",Pe="–†–µ–∫–æ—Ä–¥",Ee="–ù–∞—Å—Ç—Ä–æ–π–∫–∏",Ae="–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞",$e="–°—á—ë—Ç",Oe="–ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥!",Be="–ö–æ–º–±–æ",Te="–ï—â—ë —Ä–∞–∑",Ge="–ú–µ–Ω—é",Ve="–ú—É–∑—ã–∫–∞",Re="–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã",De="–ó–∞–∫—Ä—ã—Ç—å",ke="–ü—Ä–æ–≤–µ–¥–∏ —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ–∑–∞—Ç—å –±–ª—é–¥–∞!",ze="–ü–∞—É–∑–∞",Ne="–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",Fe={title:Le,subtitle:Ce,play:Ie,highScore:Pe,settings:Ee,gameOver:Ae,score:$e,newRecord:Oe,combo:Be,tryAgain:Te,menu:Ge,music:Ve,sounds:Re,close:De,swipeToSlice:ke,paused:ze,resume:Ne},y={en:ae,ka:we,ru:Fe},He={en:"üá¨üáß",ka:"üá¨üá™",ru:"üá∑üá∫"},je={en:"English",ka:"·É•·Éê·É†·Éó·É£·Éö·Éò",ru:"–†—É—Å—Å–∫–∏–π"};class qe{constructor(){n(this,"currentLanguage","en");n(this,"listeners",new Set);this.loadSavedLanguage()}loadSavedLanguage(){const e=localStorage.getItem("ninja-slicer-language");if(e&&y[e])this.currentLanguage=e;else{const t=navigator.language.split("-")[0];(t==="ka"||t==="ru")&&(this.currentLanguage=t)}}get language(){return this.currentLanguage}setLanguage(e){e!==this.currentLanguage&&y[e]&&(this.currentLanguage=e,localStorage.setItem("ninja-slicer-language",e),this.notifyListeners())}t(e){return y[this.currentLanguage][e]||y.en[e]||e}getFlag(e){return He[e]}getLanguageName(e){return je[e]}getAllLanguages(){return["en","ka","ru"]}onChange(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>e())}}const v=new qe;class Ue{constructor(){n(this,"game",null);n(this,"elements",null)}async init(){await this.createUI(),await h.init(),this.setupGame(),this.hideLoadingScreen(),this.updateTranslations(),v.onChange(()=>this.updateTranslations())}async createUI(){const e=document.getElementById("app");e.innerHTML=`
      <div id="loading-screen">
        <div class="loader"></div>
        <p>Loading...</p>
      </div>
      
      <canvas id="game-canvas"></canvas>
      
      <div id="ui-layer">
        <!-- Menu Screen -->
        <div id="menu-screen">
          <div class="floating-dishes">
            ${this.createFloatingDishes()}
          </div>
          <h1 class="game-title" data-i18n="title">Ninja Slicer</h1>
          <p class="menu-subtitle" data-i18n="subtitle">Slice the dishes!</p>
          <div class="high-score">
            <span data-i18n="highScore">Best:</span>
            <span id="high-score-value" class="high-score-value">0</span>
          </div>
          <button id="play-btn" class="btn" data-i18n="play">Play</button>
          <div class="language-selector">
            ${this.createLanguageButtons()}
          </div>
          <button id="settings-btn" class="btn btn-secondary btn-icon" style="margin-top: 1rem;">‚öôÔ∏è</button>
        </div>

        <!-- Game HUD -->
        <div id="game-hud">
          <div class="hud-left">
            <div id="score-display" class="score-display">0</div>
            <div id="combo-display" class="combo-display">
              <span data-i18n="combo">Combo</span> x<span id="combo-value">0</span>
            </div>
          </div>
          <div class="hud-right">
            <div id="lives-display" class="lives-display">
              <span class="life-icon">üçï</span>
              <span class="life-icon">üçï</span>
              <span class="life-icon">üçï</span>
            </div>
            <button id="pause-btn" class="btn btn-secondary btn-icon pause-btn">‚è∏Ô∏è</button>
          </div>
        </div>

        <!-- Game Over Screen -->
        <div id="game-over-screen">
          <h2 class="game-over-title" data-i18n="gameOver">Game Over</h2>
          <div id="final-score" class="final-score">0</div>
          <div id="new-record-text" class="new-record" style="display: none;" data-i18n="newRecord">New Record!</div>
          <div class="game-over-buttons">
            <button id="retry-btn" class="btn" data-i18n="tryAgain">Try Again</button>
            <button id="menu-btn" class="btn btn-secondary" data-i18n="menu">Menu</button>
          </div>
        </div>

        <!-- Settings Panel -->
        <div class="settings-overlay" id="settings-overlay"></div>
        <div id="settings-panel" class="glass-panel">
          <h3 class="settings-title" data-i18n="settings">Settings</h3>
          <div class="settings-group">
            <div class="settings-label">
              <span data-i18n="music">Music</span>
              <span id="music-value">${Math.round(m.musicVolume*100)}%</span>
            </div>
            <input type="range" id="music-slider" class="slider" min="0" max="100" value="${m.musicVolume*100}">
          </div>
          <div class="settings-group">
            <div class="settings-label">
              <span data-i18n="sounds">Sound Effects</span>
              <span id="sfx-value">${Math.round(m.sfxVolume*100)}%</span>
            </div>
            <input type="range" id="sfx-slider" class="slider" min="0" max="100" value="${m.sfxVolume*100}">
          </div>
          <button id="settings-close-btn" class="btn settings-close" data-i18n="close">Close</button>
        </div>
      </div>
    `,this.elements={app:e,loadingScreen:document.getElementById("loading-screen"),menuScreen:document.getElementById("menu-screen"),gameHud:document.getElementById("game-hud"),gameOverScreen:document.getElementById("game-over-screen"),settingsPanel:document.getElementById("settings-panel"),settingsOverlay:document.getElementById("settings-overlay"),scoreDisplay:document.getElementById("score-display"),comboDisplay:document.getElementById("combo-display"),livesDisplay:document.getElementById("lives-display"),finalScore:document.getElementById("final-score"),newRecordText:document.getElementById("new-record-text"),highScoreValue:document.getElementById("high-score-value")},this.setupUIListeners(),this.updateHighScore()}createFloatingDishes(){const e=["üçï","üçî","üç£","üç©","üåÆ","üå≠"];let t="";for(let s=0;s<8;s++){const i=e[s%e.length],o=10+s*12,r=20+s%3*25,c=s*2.5;t+=`<div class="floating-dish" style="left: ${o}%; top: ${r}%; animation-delay: ${c}s;">${i}</div>`}return t}createLanguageButtons(){return v.getAllLanguages().map(e=>`<button class="lang-btn ${e===v.language?"active":""}" data-lang="${e}">${v.getFlag(e)}</button>`).join("")}setupUIListeners(){document.getElementById("play-btn").addEventListener("click",()=>{h.play("button"),this.startGame()}),document.getElementById("pause-btn").addEventListener("click",()=>{var e;h.play("button"),((e=this.game)==null?void 0:e.currentState)===L.PLAYING&&(this.game.pause(),this.showPauseOverlay())}),document.getElementById("retry-btn").addEventListener("click",()=>{h.play("button"),this.startGame()}),document.getElementById("menu-btn").addEventListener("click",()=>{h.play("button"),this.showMenu()}),document.getElementById("settings-btn").addEventListener("click",()=>{h.play("button"),this.showSettings()}),document.getElementById("settings-close-btn").addEventListener("click",()=>{h.play("button"),this.hideSettings()}),this.elements.settingsOverlay.addEventListener("click",()=>{this.hideSettings()}),document.getElementById("music-slider").addEventListener("input",e=>{const t=parseInt(e.target.value)/100;h.setMusicVolume(t),document.getElementById("music-value").textContent=`${Math.round(t*100)}%`}),document.getElementById("sfx-slider").addEventListener("input",e=>{const t=parseInt(e.target.value)/100;h.setSfxVolume(t),document.getElementById("sfx-value").textContent=`${Math.round(t*100)}%`}),document.querySelectorAll(".lang-btn").forEach(e=>{e.addEventListener("click",()=>{h.play("button");const t=e.getAttribute("data-lang");v.setLanguage(t),document.querySelectorAll(".lang-btn").forEach(s=>s.classList.remove("active")),e.classList.add("active")})})}setupGame(){const e=document.getElementById("game-canvas");this.game=new F(e),this.game.setCallbacks({onScoreChange:t=>this.updateScore(t),onComboChange:t=>this.updateCombo(t),onLivesChange:t=>this.updateLives(t),onStateChange:t=>this.handleStateChange(t),onGameOver:(t,s)=>this.handleGameOver(t,s)})}startGame(){var e;this.elements.menuScreen.classList.add("hidden"),this.elements.gameOverScreen.classList.remove("visible"),this.elements.gameHud.classList.add("visible"),(e=this.game)==null||e.start()}showMenu(){this.elements.menuScreen.classList.remove("hidden"),this.elements.gameOverScreen.classList.remove("visible"),this.elements.gameHud.classList.remove("visible"),this.updateHighScore()}showPauseOverlay(){const e=document.createElement("div");e.id="pause-overlay",e.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 50;
      cursor: pointer;
    `,e.innerHTML=`
      <h2 style="font-size: 3rem; color: white; margin-bottom: 1rem;" data-i18n="paused">${v.t("paused")}</h2>
      <p style="color: #b8b8d1;" data-i18n="resume">${v.t("resume")}</p>
    `,e.addEventListener("click",()=>{var t;e.remove(),(t=this.game)==null||t.resume()}),document.body.appendChild(e)}showSettings(){this.elements.settingsPanel.classList.add("visible"),this.elements.settingsOverlay.classList.add("visible")}hideSettings(){this.elements.settingsPanel.classList.remove("visible"),this.elements.settingsOverlay.classList.remove("visible")}hideLoadingScreen(){this.elements.loadingScreen.classList.add("hidden")}updateScore(e){this.elements.scoreDisplay.textContent=e.toString(),this.elements.scoreDisplay.classList.remove("pop"),this.elements.scoreDisplay.offsetWidth,this.elements.scoreDisplay.classList.add("pop")}updateCombo(e){const t=this.elements.comboDisplay,s=document.getElementById("combo-value");e>0?(s.textContent=e.toString(),t.classList.add("visible"),e>=5?t.classList.add("mega"):t.classList.remove("mega")):t.classList.remove("visible","mega")}updateLives(e){this.elements.livesDisplay.querySelectorAll(".life-icon").forEach((s,i)=>{i<e?s.classList.remove("lost"):s.classList.add("lost")})}updateHighScore(){var e;this.elements.highScoreValue.textContent=((e=this.game)==null?void 0:e.highScore.toString())||"0"}handleStateChange(e){}handleGameOver(e,t){this.elements.finalScore.textContent=e.toString(),this.elements.newRecordText.style.display=t?"block":"none",this.elements.gameHud.classList.remove("visible"),setTimeout(()=>{this.elements.gameOverScreen.classList.add("visible")},500),this.updateHighScore()}updateTranslations(){document.querySelectorAll("[data-i18n]").forEach(e=>{const t=e.getAttribute("data-i18n");t&&(e.textContent=v.t(t))})}}const Ye=new Ue;Ye.init().catch(console.error);
